{"version":3,"sources":["../../src/the_conch/enactNewRule.js"],"names":["availableInputs","infrared","handler","initializer","prefix","enactNewRule","rule","db","database","ref","push","protocol","input","console","log","listener"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAMA,kBAAkB;AACtBC,YAAU,UADY;AAEtBC,WAAS;AACPC,4CADO;AAEPC,YAAQ;AAFD;AAFa,CAAxB;;AAQA,SAASC,YAAT,CAAuBC,IAAvB,EAA6B;AAC3B,MAAIC,KAAK,8BAAKC,QAAL,GAAgBC,GAAhB,CAAoB,OAApB,CAAT;AACAF,KAAGG,IAAH,CAAQJ,IAAR;;AAEA,MAAMK,WAAWL,KAAKA,IAAL,CAAUM,KAAV,CAAgBD,QAAjC;AACAE,UAAQC,GAAR,CAAYH,QAAZ;AACA,MAAIX,gBAAgBW,QAAhB,MAA8BA,QAAlC,EAA4C;AAC1CE,YAAQC,GAAR,eAAwBH,QAAxB;AACA,QAAMI,WAAWf,gBAAgBE,OAAhB,CAAwBC,WAAzC;AACAY,aAASf,gBAAgBE,OAAhB,CAAwBE,MAAjC;AACD,GAJD,MAIO;AACLS,YAAQC,GAAR,4CAAoDH,QAApD;AACD;AACF;;kBAEcN,Y","file":"enactNewRule.js","sourcesContent":["import startSocketServer from './startSocketServer'\r\nimport fire from './firebaseInitializer'\r\n\r\nconst availableInputs = {\r\n  infrared: 'infrared',\r\n  handler: {\r\n    initializer: startSocketServer,\r\n    prefix: 'IR_'\r\n  }\r\n}\r\n\r\nfunction enactNewRule (rule) {\r\n  let db = fire.database().ref('rules')\r\n  db.push(rule)\r\n\r\n  const protocol = rule.rule.input.protocol\r\n  console.log(protocol)\r\n  if (availableInputs[protocol] === protocol) {\r\n    console.log(`Starting ${protocol} listener`)\r\n    const listener = availableInputs.handler.initializer\r\n    listener(availableInputs.handler.prefix)\r\n  } else {\r\n    console.log(`No valid handler found for protocol '${protocol}'`)\r\n  }\r\n}\r\n\r\nexport default enactNewRule\r\n"]}
{"version":3,"sources":["../../src/the_conch/startSocketServer.js"],"names":["mapInputToUniversal","data","input","commandString","mapUniversalToOutput","output","startSocketServer","msgPrefix","io","require","on","client","inputMappedToOutput","console","log","emit","listen"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,sBAAsB,SAAtBA,mBAAsB,CAACC,IAAD,EAAU;AACpC,SAAO,uBAAaC,KAAb,CAAmBD,IAAnB,EAAyBE,aAAhC;AACD,CAFD;;AAIA,IAAMC,uBAAuB,SAAvBA,oBAAuB,CAACH,IAAD,EAAU;AACrC,SAAO,uBAAaI,MAAb,CAAoBJ,IAApB,EAA0BE,aAAjC;AACD,CAFD;;AAIA,SAASG,iBAAT,CAA4BC,SAA5B,EAAuC;AACrC,MAAIC,KAAKC,QAAQ,WAAR,GAAT;AACAD,KAAGE,EAAH,CAAM,SAAN,EAAiB;AAAA,WACfC,OAAOD,EAAP,CAAUH,SAAV,EAAqB,UAAUN,IAAV,EAAgB;AACnC,UAAMW,sBAAsBR,qBAAqBJ,oBAAoBC,IAApB,CAArB,CAA5B;AACAY,cAAQC,GAAR,0CAAkDb,IAAlD,oEAAmHW,mBAAnH;AACAJ,SAAGO,IAAH,CAAQ,KAAR,EAAeH,mBAAf;AACD,KAJD,CADe;AAAA,GAAjB;AAOAJ,KAAGQ,MAAH,CAAU,IAAV;AACD;;kBAEcV,iB","file":"startSocketServer.js","sourcesContent":["import commandTable from '../the_ocean/commandTable'\r\n\r\nconst mapInputToUniversal = (data) => {\r\n  return commandTable.input(data).commandString\r\n}\r\n\r\nconst mapUniversalToOutput = (data) => {\r\n  return commandTable.output(data).commandString\r\n}\r\n\r\nfunction startSocketServer (msgPrefix) {\r\n  var io = require('socket.io')()\r\n  io.on('connect', client =>\r\n    client.on(msgPrefix, function (data) {\r\n      const inputMappedToOutput = mapUniversalToOutput(mapInputToUniversal(data))\r\n      console.log(`The Conch has received a message, '${data}', which according to your rules, means it should output '${inputMappedToOutput}'`)\r\n      io.emit('IR_', inputMappedToOutput)\r\n    })\r\n  )\r\n  io.listen(3010)\r\n}\r\n\r\nexport default startSocketServer\r\n"]}
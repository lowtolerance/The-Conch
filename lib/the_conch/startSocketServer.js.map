{"version":3,"sources":["../../src/the_conch/startSocketServer.js"],"names":["mapI2U","data","input","commandString","mapU2O","output","startSocketServer","msgPrefix","io","require","on","client","mappedIO","emit","listen"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,SAAS,SAATA,MAAS,CAACC,IAAD,EAAU;AACvB,SAAO,uBAAaC,KAAb,CAAmBD,IAAnB,EAAyBE,aAAhC;AACD,CAFD;;AAIA,IAAMC,SAAS,SAATA,MAAS,CAACH,IAAD,EAAU;AACvB,SAAO,uBAAaI,MAAb,CAAoBJ,IAApB,EAA0BE,aAAjC;AACD,CAFD;;AAIA,SAASG,iBAAT,CAA4BC,SAA5B,EAAuC;AACrC,MAAIC,KAAKC,QAAQ,WAAR,GAAT;AACAD,KAAGE,EAAH,CAAM,SAAN,EAAiB;AAAA,WACfC,OAAOD,EAAP,CAAUH,SAAV,EAAqB,UAAUN,IAAV,EAAgB;AACnC,UAAMW,WAAWR,OAAOJ,OAAOC,IAAP,CAAP,CAAjB;AACAO,SAAGK,IAAH,CAAQ,WAAR,2CAA2DZ,IAA3D,oEAA4HW,QAA5H;AACAJ,SAAGK,IAAH,CAAQ,KAAR,EAAeD,QAAf;AACD,KAJD,CADe;AAAA,GAAjB;AAOAJ,KAAGM,MAAH,CAAU,IAAV;AACD;;kBAEcR,iB","file":"startSocketServer.js","sourcesContent":["import commandTable from '../the_ocean/commandTable'\r\n\r\nconst mapI2U = (data) => {\r\n  return commandTable.input(data).commandString\r\n}\r\n\r\nconst mapU2O = (data) => {\r\n  return commandTable.output(data).commandString\r\n}\r\n\r\nfunction startSocketServer (msgPrefix) {\r\n  var io = require('socket.io')()\r\n  io.on('connect', client =>\r\n    client.on(msgPrefix, function (data) {\r\n      const mappedIO = mapU2O(mapI2U(data))\r\n      io.emit('tcMessage', `The Conch has received a message, '${data}', which according to your rules, means it should output '${mappedIO}'`)\r\n      io.emit('IR_', mappedIO)\r\n    })\r\n  )\r\n  io.listen(3010)\r\n}\r\n\r\nexport default startSocketServer\r\n"]}
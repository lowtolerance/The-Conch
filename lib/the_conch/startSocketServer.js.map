{"version":3,"sources":["../../src/the_conch/startSocketServer.js"],"names":["mapI2U","data","input","commandString","mapU2O","output","mapI2O","startSocketServer","msgPrefix","io","require","on","client","mappedIO","console","log","emit","listen"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,SAAS,SAATA,MAAS,CAACC,IAAD,EAAU;AACvB,SAAO,uBAAaC,KAAb,CAAmBD,IAAnB,EAAyBE,aAAhC;AACD,CAFD;;AAIA,IAAMC,SAAS,SAATA,MAAS,CAACH,IAAD,EAAU;AACvB,SAAO,uBAAaI,MAAb,CAAoBJ,IAApB,EAA0BE,aAAjC;AACD,CAFD;;AAIA,IAAMG,SAAS,SAATA,MAAS,CAACL,IAAD,EAAU;AACvB,SAAOG,OAAOJ,OAAOC,IAAP,CAAP,CAAP;AACD,CAFD;;AAIA,SAASM,iBAAT,CAA4BC,SAA5B,EAAuC;AACrC,MAAIC,KAAKC,QAAQ,WAAR,GAAT;AACAD,KAAGE,EAAH,CAAM,SAAN,EAAiB;AAAA,WACfC,OAAOD,EAAP,CAAUH,SAAV,EAAqB,UAAUP,IAAV,EAAgB;AACnC,UAAMY,WAAWP,OAAOL,IAAP,CAAjB;AACAa,cAAQC,GAAR,CAAY,kBAAZ;AACAN,SAAGO,IAAH,CAAQ,WAAR,kCAAkDf,IAAlD,oEAAmHY,QAAnH;AACAJ,SAAGO,IAAH,CAAQ,KAAR,EAAeH,QAAf;AACD,KALD,CADe;AAAA,GAAjB;AAQAJ,KAAGQ,MAAH,CAAU,IAAV;AACD;;kBAEcV,iB","file":"startSocketServer.js","sourcesContent":["import commandTable from '../the_ocean/commandTable'\r\n\r\nconst mapI2U = (data) => {\r\n  return commandTable.input(data).commandString\r\n}\r\n\r\nconst mapU2O = (data) => {\r\n  return commandTable.output(data).commandString\r\n}\r\n\r\nconst mapI2O = (data) => {\r\n  return mapU2O(mapI2U(data))\r\n}\r\n\r\nfunction startSocketServer (msgPrefix) {\r\n  var io = require('socket.io')()\r\n  io.on('connect', client =>\r\n    client.on(msgPrefix, function (data) {\r\n      const mappedIO = mapI2O(data)\r\n      console.log('Received message')\r\n      io.emit('tcMessage', ` has received a message, '${data}', which according to your rules, means it should output '${mappedIO}'`)\r\n      io.emit('IR_', mappedIO)\r\n    })\r\n  )\r\n  io.listen(3010)\r\n}\r\n\r\nexport default startSocketServer\r\n"]}